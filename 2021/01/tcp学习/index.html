<!doctype html><html lang=zh>
<head>
<title>
tcp学习 - yoogo
</title>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge,chrome=1">
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui">
<meta name=renderer content="webkit">
<meta http-equiv=cache-control content="no-transform">
<meta http-equiv=cache-control content="no-siteapp">
<meta name=apple-mobile-web-app-capable content="yes">
<meta name=apple-mobile-web-app-status-bar-style content="black">
<meta name=format-detection content="telephone=no,email=no,adress=no">
<meta name=theme-color content="#000000">
<meta http-equiv=window-target content="_top">
<meta name=description content="what is TCP 简介 传输控制协议（英语：Transmission Control Protocol，缩写：TCP）是一种面向连接的、可靠的、基于字节流的传输层通信协议">
<meta name=generator content="Hugo 0.92.0 with theme pure">
<title>tcp学习 - yoogo</title>
<link rel=stylesheet href=https://blog.yoogo.top/css/style.min.e64d754037c0ee0ec4e20ab1d6f07740ace61729bc03850559b8caa21ae4a597.css>
<link rel=stylesheet href=https://blog.yoogo.top/css/custom.css async>
<link rel=stylesheet href=https://cdn.staticfile.org/highlight.js/9.15.10/styles/github.min.css async>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css async>
<meta property="og:title" content="tcp学习">
<meta property="og:description" content="what is TCP 简介 传输控制协议（英语：Transmission Control Protocol，缩写：TCP）是一种面向连接的、可靠的、基于字节流的传输层通信协议">
<meta property="og:type" content="article">
<meta property="og:url" content="https://blog.yoogo.top/2021/01/tcp%E5%AD%A6%E4%B9%A0/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-01-16T16:58:00+00:00">
<meta property="article:modified_time" content="2021-01-16T16:58:00+00:00">
<meta itemprop=name content="tcp学习">
<meta itemprop=description content="what is TCP 简介 传输控制协议（英语：Transmission Control Protocol，缩写：TCP）是一种面向连接的、可靠的、基于字节流的传输层通信协议"><meta itemprop=datePublished content="2021-01-16T16:58:00+00:00">
<meta itemprop=dateModified content="2021-01-16T16:58:00+00:00">
<meta itemprop=wordCount content="4133">
<meta itemprop=keywords content="计算机网络,"><meta name=twitter:card content="summary">
<meta name=twitter:title content="tcp学习">
<meta name=twitter:description content="what is TCP 简介 传输控制协议（英语：Transmission Control Protocol，缩写：TCP）是一种面向连接的、可靠的、基于字节流的传输层通信协议"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]-->
</head>
<body class="main-center theme-black" itemscope itemtype=http://schema.org/WebPage><header class=header itemscope itemtype=http://schema.org/WPHeader>
<div class=slimContent>
<div class=navbar-header>
<div class="profile-block text-center">
<a id=avatar href=https://github.com/yoogoc target=_blank>
<img class="img-circle img-rotate" src=https://blog.yoogo.top/sites-images/Avatar200.png width=200 height=200>
</a>
<h2 id=name class="hidden-xs hidden-sm">yoogo</h2>
<h3 id=title class="hidden-xs hidden-sm hidden-md">多读书，少放炮</h3>
<small id=location class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i>广州</small>
</div><div class=search id=search-form-wrap>
<form class="search-form sidebar-form">
<div class=input-group>
<input type=text class="search-form-input form-control" placeholder=搜索>
<span class=input-group-btn>
<button type=submit class="search-form-submit btn btn-flat" onclick=return!1><i class="icon icon-search"></i></button>
</span>
</div>
<div class=ins-search>
<div class=ins-search-mask></div>
<div class=ins-search-container>
<div class=ins-input-wrapper>
<input type=text class=ins-search-input placeholder=想要查找什么... x-webkit-speech>
<button type=button class="close ins-close ins-selectable" data-dismiss=modal aria-label=Close><span aria-hidden=true>×</span></button>
</div>
<div class=ins-section-wrapper>
<div class=ins-section-container></div>
</div>
</div>
</div>
</form>
</div>
<button class="navbar-toggle collapsed" type=button data-toggle=collapse data-target=#main-navbar aria-controls=main-navbar aria-expanded=false>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span>
</button>
</div>
<nav id=main-navbar class="collapse navbar-collapse" itemscope itemtype=http://schema.org/SiteNavigationElement role=navigation>
<ul class="nav navbar-nav main-nav">
<li class="menu-item menu-item-home">
<a href=/>
<i class="icon icon-home-fill"></i>
<span class=menu-title>Home</span>
</a>
</li>
<li class="menu-item menu-item-archives">
<a href=/posts/>
<i class="icon icon-archives-fill"></i>
<span class=menu-title>Archives</span>
</a>
</li>
<li class="menu-item menu-item-categories">
<a href=/categories/>
<i class="icon icon-folder"></i>
<span class=menu-title>Categories</span>
</a>
</li>
<li class="menu-item menu-item-tags">
<a href=/tags/>
<i class="icon icon-tags"></i>
<span class=menu-title>Tags</span>
</a>
</li>
<li class="menu-item menu-item-about">
<a href=/about/>
<i class="icon icon-cup-fill"></i>
<span class=menu-title>About</span>
</a>
</li>
</ul>
</nav>
</div>
</header>
<aside class=sidebar itemscope itemtype=http://schema.org/WPSideBar>
<div class=slimContent>
<div class=widget>
<h3 class=widget-title> 标签</h3>
<div id=tag-cloud-list class=widget-body>
<a href=https://blog.yoogo.top/tags/cloudnative/ class=tag-list-link rel=1>cloudnative<span class=tag-list-count>1</span></a>
<a href=https://blog.yoogo.top/tags/coredns/ class=tag-list-link rel=2>coredns<span class=tag-list-count>2</span></a>
<a href=https://blog.yoogo.top/tags/devops/ class=tag-list-link rel=5>devops<span class=tag-list-count>5</span></a>
<a href=https://blog.yoogo.top/tags/dns/ class=tag-list-link rel=2>dns<span class=tag-list-count>2</span></a>
<a href=https://blog.yoogo.top/tags/editor/ class=tag-list-link rel=1>editor<span class=tag-list-count>1</span></a>
<a href=https://blog.yoogo.top/tags/git/ class=tag-list-link rel=5>git<span class=tag-list-count>5</span></a>
<a href=https://blog.yoogo.top/tags/go/ class=tag-list-link rel=8>go<span class=tag-list-count>8</span></a>
<a href=https://blog.yoogo.top/tags/greatwall/ class=tag-list-link rel=1>greatwall<span class=tag-list-count>1</span></a>
<a href=https://blog.yoogo.top/tags/hexo/ class=tag-list-link rel=1>hexo<span class=tag-list-count>1</span></a>
<a href=https://blog.yoogo.top/tags/iam/ class=tag-list-link rel=1>iam<span class=tag-list-count>1</span></a>
<a href=https://blog.yoogo.top/tags/java/ class=tag-list-link rel=8>java<span class=tag-list-count>8</span></a>
<a href=https://blog.yoogo.top/tags/k8s/ class=tag-list-link rel=13>k8s<span class=tag-list-count>13</span></a>
<a href=https://blog.yoogo.top/tags/linux/ class=tag-list-link rel=6>linux<span class=tag-list-count>6</span></a>
<a href=https://blog.yoogo.top/tags/mac/ class=tag-list-link rel=1>mac<span class=tag-list-count>1</span></a>
<a href=https://blog.yoogo.top/tags/markdown/ class=tag-list-link rel=1>markdown<span class=tag-list-count>1</span></a>
<a href=https://blog.yoogo.top/tags/os/ class=tag-list-link rel=2>os<span class=tag-list-count>2</span></a>
<a href=https://blog.yoogo.top/tags/rails/ class=tag-list-link rel=5>rails<span class=tag-list-count>5</span></a>
<a href=https://blog.yoogo.top/tags/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/ class=tag-list-link rel=1>体系结构<span class=tag-list-count>1</span></a>
<a href=https://blog.yoogo.top/tags/%E5%B7%A5%E4%BD%9C%E6%B5%81/ class=tag-list-link rel=1>工作流<span class=tag-list-count>1</span></a>
<a href=https://blog.yoogo.top/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/ class=tag-list-link rel=1>数据结构<span class=tag-list-count>1</span></a>
<a href=https://blog.yoogo.top/tags/%E6%AD%A3%E5%88%99/ class=tag-list-link rel=1>正则<span class=tag-list-count>1</span></a>
<a href=https://blog.yoogo.top/tags/%E8%AE%A1%E7%AE%97%E6%80%9D%E7%BB%B4/ class=tag-list-link rel=2>计算思维<span class=tag-list-count>2</span></a>
<a href=https://blog.yoogo.top/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/ class=tag-list-link rel=1>计算机网络<span class=tag-list-count>1</span></a>
</div>
<script>document.onreadystatechange=()=>{document.readyState==='complete'&&tagCloud('#tag-cloud-list a',8,20)};function tagCloud(c,d,e){let b=0,a=0;$(c).each(function(){let c=Number($(this).attr("rel"));b<c&&(b=c),(a>c||a==0)&&(a=c)});let f=(e-d)/(b-a);$(c).each(function(){let b=$(this).attr("rel")-a;$(this).css({"font-size":d+b*f+'px'})})}</script>
</div>
<div class=widget>
<h3 class=widget-title> 分类</h3>
<div class=widget-body>
<ul class=category-list>
</ul>
</div>
</div>
<div class=widget>
<h3 class=widget-title> 标签</h3>
<div class=widget-body>
<ul class=tag-list>
<li class=tag-list-item><a href=https://blog.yoogo.top/tags/cloudnative/ class=tag-list-link>cloudnative</a><span class=tag-list-count>1</span></li>
<li class=tag-list-item><a href=https://blog.yoogo.top/tags/coredns/ class=tag-list-link>coredns</a><span class=tag-list-count>2</span></li>
<li class=tag-list-item><a href=https://blog.yoogo.top/tags/devops/ class=tag-list-link>devops</a><span class=tag-list-count>5</span></li>
<li class=tag-list-item><a href=https://blog.yoogo.top/tags/dns/ class=tag-list-link>dns</a><span class=tag-list-count>2</span></li>
<li class=tag-list-item><a href=https://blog.yoogo.top/tags/editor/ class=tag-list-link>editor</a><span class=tag-list-count>1</span></li>
<li class=tag-list-item><a href=https://blog.yoogo.top/tags/git/ class=tag-list-link>git</a><span class=tag-list-count>5</span></li>
<li class=tag-list-item><a href=https://blog.yoogo.top/tags/go/ class=tag-list-link>go</a><span class=tag-list-count>8</span></li>
<li class=tag-list-item><a href=https://blog.yoogo.top/tags/greatwall/ class=tag-list-link>greatwall</a><span class=tag-list-count>1</span></li>
<li class=tag-list-item><a href=https://blog.yoogo.top/tags/hexo/ class=tag-list-link>hexo</a><span class=tag-list-count>1</span></li>
<li class=tag-list-item><a href=https://blog.yoogo.top/tags/iam/ class=tag-list-link>iam</a><span class=tag-list-count>1</span></li>
<li class=tag-list-item><a href=https://blog.yoogo.top/tags/java/ class=tag-list-link>java</a><span class=tag-list-count>8</span></li>
<li class=tag-list-item><a href=https://blog.yoogo.top/tags/k8s/ class=tag-list-link>k8s</a><span class=tag-list-count>13</span></li>
<li class=tag-list-item><a href=https://blog.yoogo.top/tags/linux/ class=tag-list-link>linux</a><span class=tag-list-count>6</span></li>
<li class=tag-list-item><a href=https://blog.yoogo.top/tags/mac/ class=tag-list-link>mac</a><span class=tag-list-count>1</span></li>
<li class=tag-list-item><a href=https://blog.yoogo.top/tags/markdown/ class=tag-list-link>markdown</a><span class=tag-list-count>1</span></li>
<li class=tag-list-item><a href=https://blog.yoogo.top/tags/os/ class=tag-list-link>os</a><span class=tag-list-count>2</span></li>
<li class=tag-list-item><a href=https://blog.yoogo.top/tags/rails/ class=tag-list-link>rails</a><span class=tag-list-count>5</span></li>
<li class=tag-list-item><a href=https://blog.yoogo.top/tags/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/ class=tag-list-link>体系结构</a><span class=tag-list-count>1</span></li>
<li class=tag-list-item><a href=https://blog.yoogo.top/tags/%E5%B7%A5%E4%BD%9C%E6%B5%81/ class=tag-list-link>工作流</a><span class=tag-list-count>1</span></li>
<li class=tag-list-item><a href=https://blog.yoogo.top/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/ class=tag-list-link>数据结构</a><span class=tag-list-count>1</span></li>
<li class=tag-list-item><a href=https://blog.yoogo.top/tags/%E6%AD%A3%E5%88%99/ class=tag-list-link>正则</a><span class=tag-list-count>1</span></li>
<li class=tag-list-item><a href=https://blog.yoogo.top/tags/%E8%AE%A1%E7%AE%97%E6%80%9D%E7%BB%B4/ class=tag-list-link>计算思维</a><span class=tag-list-count>2</span></li>
<li class=tag-list-item><a href=https://blog.yoogo.top/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/ class=tag-list-link>计算机网络</a><span class=tag-list-count>1</span></li>
</ul>
</div>
</div>
<div class=widget>
<h3 class=widget-title>最新文章</h3>
<div class=widget-body>
<ul class="recent-post-list list-unstyled no-thumbnail">
<li>
<div class=item-inner>
<p class=item-title>
<a href=https://blog.yoogo.top/2021/10/ent%E5%88%86%E6%9E%90/ class=title>ent分析-ent codegen</a>
</p>
<p class=item-date>
<time datetime="2021-10-07 12:30:00 +0000 UTC" itemprop=datePublished>2021-10-07</time>
</p>
</div>
</li>
<li>
<div class=item-inner>
<p class=item-title>
<a href=https://blog.yoogo.top/2021/06/ingress-nginx%E6%98%AF%E5%A6%82%E4%BD%95%E5%B7%A5%E4%BD%9C%E7%9A%84/ class=title>ingress-nginx是如何工作的</a>
</p>
<p class=item-date>
<time datetime="2021-06-19 13:06:00 +0000 UTC" itemprop=datePublished>2021-06-19</time>
</p>
</div>
</li>
<li>
<div class=item-inner>
<p class=item-title>
<a href=https://blog.yoogo.top/2021/06/coredns-%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0k8s%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0/ class=title>coredns-如何实现k8s服务发现</a>
</p>
<p class=item-date>
<time datetime="2021-06-07 18:54:00 +0000 UTC" itemprop=datePublished>2021-06-07</time>
</p>
</div>
</li>
<li>
<div class=item-inner>
<p class=item-title>
<a href=https://blog.yoogo.top/2021/05/linux-namespace/ class=title>Linux Namespace</a>
</p>
<p class=item-date>
<time datetime="2021-05-09 11:29:00 +0000 UTC" itemprop=datePublished>2021-05-09</time>
</p>
</div>
</li>
<li>
<div class=item-inner>
<p class=item-title>
<a href=https://blog.yoogo.top/2021/04/kubeadm%E9%83%A8%E7%BD%B2k8s/ class=title>kubeadm部署k8s</a>
</p>
<p class=item-date>
<time datetime="2021-04-18 15:57:00 +0000 UTC" itemprop=datePublished>2021-04-18</time>
</p>
</div>
</li>
</ul>
</div>
</div>
</div>
</aside>
<aside class="sidebar sidebar-toc collapse" id=collapseToc itemscope itemtype=http://schema.org/WPSideBar>
<div class=slimContent>
<h4 class=toc-title>文章目录</h4>
<nav id=toc class="js-toc toc">
</nav>
</div>
</aside>
<main class=main role=main><div class=content>
<article id=- class="article article-type-" itemscope itemtype=http://schema.org/BlogPosting>
<div class=article-header>
<h1 itemprop=name>
<a class=article-title href=/2021/01/tcp%E5%AD%A6%E4%B9%A0/>tcp学习</a>
</h1>
<div class=article-meta>
<span class=article-date>
<i class="icon icon-calendar-check"></i>&nbsp;
<a href=https://blog.yoogo.top/2021/01/tcp%E5%AD%A6%E4%B9%A0/ class=article-date>
<time datetime="2021-01-16 16:58:00 +0000 UTC" itemprop=datePublished>2021-01-16</time>
</a>
</span>
<span class=article-tag>
<i class="icon icon-tags"></i>&nbsp;
<a class=article-tag-link href=/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/> 计算机网络 </a>
</span>
<span class="post-wordcount hidden-xs" itemprop=wordCount>字数统计: 4133字</span>
<span class="post-readcount hidden-xs" itemprop=timeRequired>阅读时长: 9分 </span>
</div>
</div>
<div class="article-entry marked-body js-toc-content" itemprop=articleBody>
<h1 id=what-is-tcp>what is TCP</h1>
<h2 id=简介>简介</h2>
<p><strong>传输控制协议</strong>（英语：<strong>T</strong>ransmission <strong>C</strong>ontrol <strong>P</strong>rotocol，缩写：<strong>TCP</strong>）是一种面向连接的、可靠的、基于<a href=https://zh.wikipedia.org/wiki/%E5%AD%97%E7%AF%80%E6%B5%81>字节流</a>的<a href=https://zh.wikipedia.org/wiki/%E4%BC%A0%E8%BE%93%E5%B1%82>传输层</a>通信协议，由<a href=https://zh.wikipedia.org/wiki/IETF>IETF</a>的<a href=https://zh.wikipedia.org/wiki/RFC>RFC</a> <a href=https://tools.ietf.org/html/rfc793>793</a>定义。在简化的计算机网络<a href=https://zh.wikipedia.org/wiki/OSI%E6%A8%A1%E5%9E%8B>OSI模型</a>中，它完成第四层传输层所指定的功能。<a href=https://zh.wikipedia.org/wiki/%E7%94%A8%E6%88%B7%E6%95%B0%E6%8D%AE%E6%8A%A5%E5%8D%8F%E8%AE%AE>用户数据报协议</a>（UDP）是同一层内另一个重要的传输协议。</p>
<h2 id=概念>概念</h2>
<p>数据在TCP层称为流（Stream），数据分组称为分段（Segment）。作为比较，数据在IP层称为Datagram，数据分组称为分片（Fragment）。 UDP 中分组称为Message。</p>
<p>**CWR(Congestion Window Reduce)：拥塞窗口减少标志被发送主机设置，用来表明它接收到了设置ECE标志的TCP包，发送端通过降低发送窗口的大小来降低发送速率</p>
<p><strong>ECE(ECN Echo)</strong>：ECN响应标志被用来在TCP3次握手时表明一个TCP端是具备ECN功能的，并且表明接收到的TCP包的IP头部的ECN被设置为11。更多信息请参考RFC793。</p>
<p><strong>URG(Urgent)</strong>：该标志位置位表示紧急(The urgent pointer) 标志有效。该标志位目前已经很少使用参考后面流量控制和窗口管理部分的介绍。</p>
<p><strong>ACK(Acknowledgment)</strong>：取值1代表Acknowledgment Number字段有效，这是一个确认的TCP包，取值0则不是确认包。后续文章介绍中当ACK标志位有效的时候我们称呼这个包为ACK包，使用大写的ACK称呼。</p>
<p><strong>PSH(Push)</strong>：该标志置位时，一般是表示发送端缓存中已经没有待发送的数据，接收端不将该数据进行队列处理，而是尽可能快将数据转由应用处理。在处理 telnet 或 rlogin 等交互模式的连接时，该标志总是置位的。</p>
<p><strong>RST(Reset)</strong>：用于复位相应的TCP连接。通常在发生异常或者错误的时候会触发复位TCP连接。</p>
<p><strong>SYN(Synchronize</strong>)：同步序列编号(Synchronize Sequence Numbers)有效。该标志仅在三次握手建立TCP连接时有效。它提示TCP连接的服务端检查序列编号，该序列编号为TCP连接初始端(一般是客户端)的初始序列编号。在这里，可以把TCP序列编号看作是一个范围从0到4，294，967，295的32位计数器。通过TCP连接交换的数据中每一个字节都经过序列编号。在TCP报头中的序列编号栏包括了TCP分段中第一个字节的序列编号。类似的后续文章介绍中当这个SYN标志位有效的时候我们称呼这个包为SYN包。</p>
<p><strong>FIN(Finish)</strong>：带有该标志置位的数据包用来结束一个TCP会话，但对应端口仍处于开放状态，准备接收后续数据。当FIN标志有效的时候我们称呼这个包为FIN包。</p>
<h2 id=运行>运行</h2>
<p>TCP协议的运行可划分为三个阶段：连接创建(<em>connection establishment</em>)、数据传送（<em>data transfer</em>）和连接终止（<em>connection termination</em>）。操作系统将TCP连接抽象为<a href=https://zh.wikipedia.org/wiki/Berkeley%E5%A5%97%E6%8E%A5%E5%AD%97>套接字</a>表示的本地端点（local end-point），作为编程接口给程序使用。在TCP连接的生命期内，本地端点要经历一系列的<a href=https://zh.wikipedia.org/wiki/%E4%BC%A0%E8%BE%93%E6%8E%A7%E5%88%B6%E5%8D%8F%E8%AE%AE#%E7%8A%B6%E6%80%81%E7%BC%96%E7%A0%81>状态</a>改变。</p>
<h3 id=连接创建3次握手>连接创建（3次握手）</h3>
<h4 id=第一次握手client---server>第一次握手(client -> server)</h4>
<pre><code class=language-sh>IP 127.0.0.1.63515 &gt; 127.0.0.1.8888: Flags [S], seq 332753718, win 65535, options [mss 16344,nop,wscale 6,nop,nop,TS val 1572533652 ecr 0,sackOK,eol], length 0
	0x0000:  4500 0040 0000 4000 4006 0000 7f00 0001
	0x0010:  7f00 0001 f81b 22b8 13d5 6b36 0000 0000
	0x0020:  b002 ffff fe34 0000 0204 3fd8 0103 0306
	0x0030:  0101 080a 5dba f594 0000 0000 0402 0000
</code></pre>
<p>过程：客户端（通过执行connect函数）向服务器端发送一个SYN包，请求一个主动打开。该包携带客户端为这个连接请求而设定的随机数（seq=332753718,hex(seq)=13d56b36）作为消息序列号。暂且称此次数据包的seq为s1</p>
<p>意义：确认客户端发送能力正常</p>
<h4 id=第二次握手server---client>第二次握手(server -> client)</h4>
<pre><code class=language-sh>IP 127.0.0.1.8888 &gt; 127.0.0.1.63515: Flags [S.], seq 1886023911, ack 332753719, win 65535, options [mss 16344,nop,wscale 6,nop,nop,TS val 1572533652 ecr 1572533652,sackOK,eol], length 0
	0x0000:  4500 0040 0000 4000 4006 0000 7f00 0001
	0x0010:  7f00 0001 22b8 f81b 706a 70e7 13d5 6b37
	0x0020:  b012 ffff fe34 0000 0204 3fd8 0103 0306
	0x0030:  0101 080a 5dba f594 5dba f594 0402 0000
</code></pre>
<p>过程：服务器端收到一个合法的SYN包后，把该包放入SYN队列中；回送一个SYN/ACK。ACK的确认码应为第一次握手的s1+1，SYN/ACK包本身携带一个随机产生的seq。暂且称此次数据包的ACK为a1，暂且称此次数据包的seq为s2</p>
<p>意义：服务端的接收、发送能力正常</p>
<p>第三次 握手(client -> server, server -> client)</p>
<pre><code class=language-sh>IP 127.0.0.1.63515 &gt; 127.0.0.1.8888: Flags [.], ack 1, win 6379, options [nop,nop,TS val 1572533652 ecr 1572533652], length 0
	0x0000:  4500 0034 0000 4000 4006 0000 7f00 0001
	0x0010:  7f00 0001 f81b 22b8 13d5 6b37 706a 70e8
	0x0020:  8010 18eb fe28 0000 0101 080a 5dba f594
	0x0030:  5dba f594
IP 127.0.0.1.8888 &gt; 127.0.0.1.63515: Flags [.], ack 1, win 6379, options [nop,nop,TS val 1572533652 ecr 1572533652], length 0
	0x0000:  4500 0034 0000 4000 4006 0000 7f00 0001
	0x0010:  7f00 0001 22b8 f81b 706a 70e8 13d5 6b37
	0x0020:  8010 18eb fe28 0000 0101 080a 5dba f594
	0x0030:  5dba f594
</code></pre>
<p>过程：客户端收到SYN/ACK包后，发送一个ACK包，该包的seq被设定为a1+1，而ACK的确认码则为s2+1。然后客户端的connect函数成功返回。当服务器端收到这个ACK包的时候，把请求帧从SYN队列中移出，放至ACCEPT队列中；这时accept函数如果处于阻塞状态，可以被唤醒，从ACCEPT队列中取出ACK包，重新创建一个新的用于双向通信的sockfd，并返回。</p>
<p>意义： 客户端接收能力正常</p>
<p>我自己感觉虽然是3次握手，但是由于tcp协议的对称性，即有发送就会有响应，所以真实是4次？</p>
<h3 id=数据传输>数据传输</h3>
<pre><code>IP 127.0.0.1.63515 &gt; 127.0.0.1.8888: Flags [P.], seq 1:1060, ack 1, win 6379, options [nop,nop,TS val 1572533652 ecr 1572533652], length 1059
	0x0000:  4500 0457 0000 4000 4006 0000 7f00 0001  E..W..@.@.......
	0x0010:  7f00 0001 f81b 22b8 13d5 6b37 706a 70e8  ......&quot;...k7pjp.
	0x0020:  8018 18eb 024c 0000 0101 080a 5dba f594  .....L......]...
	0x0030:  5dba f594 504f 5354 202f 6261 7365 2f6c  ]...POST./base/l
	0x0040:  6f67 696e 2048 5454 502f 312e 310d 0a48  ogin.HTTP/1.1..H
	0x0050:  6f73 743a 2031 3237 2e30 2e30 2e31 3a38  ost:.127.0.0.1:8
	0x0060:  3838 380d 0a43 6f6e 6e65 6374 696f 6e3a  888..Connection:
	0x0070:  206b 6565 702d 616c 6976 650d 0a43 6f6e  .keep-alive..Con
	0x0080:  7465 6e74 2d4c 656e 6774 683a 2039 380d  tent-Length:.98.
	0x0090:  0a61 6363 6570 743a 2061 7070 6c69 6361  .accept:.applica
	0x00a0:  7469 6f6e 2f6a 736f 6e0d 0a55 7365 722d  tion/json..User-
	0x00b0:  4167 656e 743a 204d 6f7a 696c 6c61 2f35  Agent:.Mozilla/5
	0x00c0:  2e30 2028 4d61 6369 6e74 6f73 683b 2049  .0.(Macintosh;.I
	0x00d0:  6e74 656c 204d 6163 204f 5320 5820 3131  ntel.Mac.OS.X.11
	0x00e0:  5f31 5f30 2920 4170 706c 6557 6562 4b69  _1_0).AppleWebKi
	0x00f0:  742f 3533 372e 3336 2028 4b48 544d 4c2c  t/537.36.(KHTML,
	0x0100:  206c 696b 6520 4765 636b 6f29 2043 6872  .like.Gecko).Chr
	0x0110:  6f6d 652f 3837 2e30 2e34 3238 302e 3134  ome/87.0.4280.14
	0x0120:  3120 5361 6661 7269 2f35 3337 2e33 360d  1.Safari/537.36.
	0x0130:  0a43 6f6e 7465 6e74 2d54 7970 653a 2061  .Content-Type:.a
	0x0140:  7070 6c69 6361 7469 6f6e 2f6a 736f 6e0d  pplication/json.
	0x0150:  0a4f 7269 6769 6e3a 2068 7474 703a 2f2f  .Origin:.http://
	0x0160:  3132 372e 302e 302e 313a 3838 3838 0d0a  127.0.0.1:8888..
	0x0170:  5365 632d 4665 7463 682d 5369 7465 3a20  Sec-Fetch-Site:.
	0x0180:  7361 6d65 2d6f 7269 6769 6e0d 0a53 6563  same-origin..Sec
	0x0190:  2d46 6574 6368 2d4d 6f64 653a 2063 6f72  -Fetch-Mode:.cor
	0x01a0:  730d 0a53 6563 2d46 6574 6368 2d44 6573  s..Sec-Fetch-Des
	0x01b0:  743a 2065 6d70 7479 0d0a 5265 6665 7265  t:.empty..Refere
	0x01c0:  723a 2068 7474 703a 2f2f 3132 372e 302e  r:.http://127.0.
	0x01d0:  302e 313a 3838 3838 2f73 7761 6767 6572  0.1:8888/swagger
	0x01e0:  2f69 6e64 6578 2e68 746d 6c0d 0a41 6363  /index.html..Acc
	0x01f0:  6570 742d 456e 636f 6469 6e67 3a20 677a  ept-Encoding:.gz
	0x0200:  6970 2c20 6465 666c 6174 652c 2062 720d  ip,.deflate,.br.
	0x0210:  0a41 6363 6570 742d 4c61 6e67 7561 6765  .Accept-Language
	0x0220:  3a20 7a68 2d43 4e2c 7a68 3b71 3d30 2e39  :.zh-CN,zh;q=0.9
	0x0230:  0d0a 436f 6f6b 6965 3a20 5f67 613d 4741  ..Cookie:._ga=GA
	0x0240:  312e 312e 3131 3434 3731 3235 3531 2e31  1.1.1144712551.1
	0x0250:  3630 3939 3430 3830 323b 205f 686f 6d65  609940802;._home
	0x0260:  6c61 6e64 5f73 6573 7369 6f6e 3d73 4962  land_session=sIb
	0x0270:  7a4b 2532 4243 776b 4525 3242 5954 3978  zK%2BCwkE%2BYT9x
	0x0280:  425a 3675 5041 7877 4641 4b46 4869 7732  BZ6uPAxwFAKFHiw2
	0x0290:  6861 7150 3951 796b 5968 7371 7647 4d70  haqP9QykYhsqvGMp
	0x02a0:  3033 5872 4470 5330 6a38 4b4f 6535 6c36  03XrDpS0j8KOe5l6
	0x02b0:  6e48 2532 4654 4770 5151 324e 6157 7154  nH%2FTGpQQ2NaWqT
	0x02c0:  654a 4f71 4944 6a6b 3272 537a 347a 4e54  eJOqIDjk2rSz4zNT
	0x02d0:  6c63 586a 5843 4a64 3537 4b57 6642 4142  lcXjXCJd57KWfBAB
	0x02e0:  7861 6463 5657 3070 586f 4177 3933 7444  xadcVW0pXoAw93tD
	0x02f0:  5331 7a51 6663 6458 6d4d 3869 7263 3337  S1zQfcdXmM8irc37
	0x0300:  7834 6c77 3179 514d 635a 6c33 4771 616e  x4lw1yQMcZl3Gqan
	0x0310:  4462 5639 5a58 6464 7375 6725 3246 7452  DbV9ZXddsug%2FtR
	0x0320:  5655 4766 5953 3550 3874 6d44 5161 3362  VUGfYS5P8tmDQa3b
	0x0330:  4968 4e7a 6a25 3242 6555 506a 6866 3725  IhNzj%2BeUPjhf7%
	0x0340:  3246 7671 5446 4353 4c31 6a72 3268 4146  2FvqTFCSL1jr2hAF
	0x0350:  2532 4249 4225 3242 5255 4834 5551 6453  %2BIB%2BRUH4UQdS
	0x0360:  6b76 6750 6f7a 6d74 6e48 6172 6241 4f6b  kvgPozmtnHarbAOk
	0x0370:  4e6f 5250 2532 4676 596a 5376 3261 4f37  NoRP%2FvYjSv2aO7
	0x0380:  506a 7358 7178 6248 5932 4a44 3866 5a51  PjsXqxbHY2JD8fZQ
	0x0390:  6453 6c45 6d70 577a 4c41 5844 6745 7665  dSlEmpWzLAXDgEve
	0x03a0:  3536 5755 4f69 6869 3559 6876 3564 4b76  56WUOihi5Yhv5dKv
	0x03b0:  6171 7047 6d37 5736 534f 716d 436f 2533  aqpGm7W6SOqmCo%3
	0x03c0:  442d 2d4d 5271 6745 4f6b 3343 4e45 4543  D--MRqgEOk3CNEEC
	0x03d0:  5a6e 462d 2d72 3166 7154 3148 7830 5764  ZnF--r1fqT1Hx0Wd
	0x03e0:  796e 7444 3357 3744 5951 6725 3344 2533  yntD3W7DYQg%3D%3
	0x03f0:  440d 0a0d 0a7b 0a20 2022 6361 7074 6368  D....{...&quot;captch
	0x0400:  6122 3a20 2273 7472 696e 6722 2c0a 2020  a&quot;:.&quot;string&quot;,...
	0x0410:  2263 6170 7463 6861 4964 223a 2022 7374  &quot;captchaId&quot;:.&quot;st
	0x0420:  7269 6e67 222c 0a20 2022 7061 7373 776f  ring&quot;,...&quot;passwo
	0x0430:  7264 223a 2022 7374 7269 6e67 222c 0a20  rd&quot;:.&quot;string&quot;,..
	0x0440:  2022 7573 6572 6e61 6d65 223a 2022 7374  .&quot;username&quot;:.&quot;st
	0x0450:  7269 6e67 220a 7d                        ring&quot;.}
IP 127.0.0.1.8888 &gt; 127.0.0.1.63515: Flags [.], ack 1060, win 6363, options [nop,nop,TS val 1572533652 ecr 1572533652], length 0
	0x0000:  4500 0034 0000 4000 4006 0000 7f00 0001  E..4..@.@.......
	0x0010:  7f00 0001 22b8 f81b 706a 70e8 13d5 6f5a  ....&quot;...pjp...oZ
	0x0020:  8010 18db fe28 0000 0101 080a 5dba f594  .....(......]...
	0x0030:  5dba f594
IP 127.0.0.1.8888 &gt; 127.0.0.1.63515: Flags [P.], seq 1:550, ack 1060, win 6363, options [nop,nop,TS val 1572533671 ecr 1572533652], length 549
	0x0000:  4500 0259 0000 4000 4006 0000 7f00 0001  E..Y..@.@.......
	0x0010:  7f00 0001 22b8 f81b 706a 70e8 13d5 6f5a  ....&quot;...pjp...oZ
	0x0020:  8018 18db 004e 0000 0101 080a 5dba f5a7  .....N......]...
	0x0030:  5dba f594 4854 5450 2f31 2e31 2032 3030  ]...HTTP/1.1.200
	0x0040:  204f 4b0d 0a41 6363 6573 732d 436f 6e74  .OK..Access-Cont
	0x0050:  726f 6c2d 416c 6c6f 772d 4372 6564 656e  rol-Allow-Creden
	0x0060:  7469 616c 733a 2074 7275 650d 0a41 6363  tials:.true..Acc
	0x0070:  6573 732d 436f 6e74 726f 6c2d 416c 6c6f  ess-Control-Allo
	0x0080:  772d 4865 6164 6572 733a 2043 6f6e 7465  w-Headers:.Conte
	0x0090:  6e74 2d54 7970 652c 4163 6365 7373 546f  nt-Type,AccessTo
	0x00a0:  6b65 6e2c 582d 4353 5246 2d54 6f6b 656e  ken,X-CSRF-Token
	0x00b0:  2c20 4175 7468 6f72 697a 6174 696f 6e2c  ,.Authorization,
	0x00c0:  2054 6f6b 656e 2c58 2d54 6f6b 656e 2c58  .Token,X-Token,X
	0x00d0:  2d55 7365 722d 4964 0d0a 4163 6365 7373  -User-Id..Access
	0x00e0:  2d43 6f6e 7472 6f6c 2d41 6c6c 6f77 2d4d  -Control-Allow-M
	0x00f0:  6574 686f 6473 3a20 504f 5354 2c20 4745  ethods:.POST,.GE
	0x0100:  542c 204f 5054 494f 4e53 2c44 454c 4554  T,.OPTIONS,DELET
	0x0110:  452c 5055 540d 0a41 6363 6573 732d 436f  E,PUT..Access-Co
	0x0120:  6e74 726f 6c2d 416c 6c6f 772d 4f72 6967  ntrol-Allow-Orig
	0x0130:  696e 3a20 6874 7470 3a2f 2f31 3237 2e30  in:.http://127.0
	0x0140:  2e30 2e31 3a38 3838 380d 0a41 6363 6573  .0.1:8888..Acces
	0x0150:  732d 436f 6e74 726f 6c2d 4578 706f 7365  s-Control-Expose
	0x0160:  2d48 6561 6465 7273 3a20 436f 6e74 656e  -Headers:.Conten
	0x0170:  742d 4c65 6e67 7468 2c20 4163 6365 7373  t-Length,.Access
	0x0180:  2d43 6f6e 7472 6f6c 2d41 6c6c 6f77 2d4f  -Control-Allow-O
	0x0190:  7269 6769 6e2c 2041 6363 6573 732d 436f  rigin,.Access-Co
	0x01a0:  6e74 726f 6c2d 416c 6c6f 772d 4865 6164  ntrol-Allow-Head
	0x01b0:  6572 732c 2043 6f6e 7465 6e74 2d54 7970  ers,.Content-Typ
	0x01c0:  650d 0a43 6f6e 7465 6e74 2d54 7970 653a  e..Content-Type:
	0x01d0:  2061 7070 6c69 6361 7469 6f6e 2f6a 736f  .application/jso
	0x01e0:  6e3b 2063 6861 7273 6574 3d75 7466 2d38  n;.charset=utf-8
	0x01f0:  0d0a 4461 7465 3a20 5361 742c 2031 3620  ..Date:.Sat,.16.
	0x0200:  4a61 6e20 3230 3231 2030 393a 3336 3a34  Jan.2021.09:36:4
	0x0210:  3420 474d 540d 0a43 6f6e 7465 6e74 2d4c  4.GMT..Content-L
	0x0220:  656e 6774 683a 2034 340d 0a0d 0a7b 2263  ength:.44....{&quot;c
	0x0230:  6f64 6522 3a37 2c22 6461 7461 223a 7b7d  ode&quot;:7,&quot;data&quot;:{}
	0x0240:  2c22 6d73 6722 3a22 e9aa 8ce8 af81 e7a0  ,&quot;msg&quot;:&quot;........
	0x0250:  81e9 9499 e8af af22 7d                   .......&quot;}
IP 127.0.0.1.63515 &gt; 127.0.0.1.8888: Flags [.], ack 550, win 6371, options [nop,nop,TS val 1572533671 ecr 1572533671], length 0
	0x0000:  4500 0034 0000 4000 4006 0000 7f00 0001  E..4..@.@.......
	0x0010:  7f00 0001 f81b 22b8 13d5 6f5a 706a 730d  ......&quot;...oZpjs.
	0x0020:  8010 18e3 fe28 0000 0101 080a 5dba f5a7  .....(......]...
	0x0030:  5dba f5a7
</code></pre>
<p>可以看出http协议中的get,post&mldr;本质上是没有区别的，请求数据放在query，header，body本质是没有区别的，只是要用合适方式去做合适的事</p>
<h3 id=关闭连接>关闭连接</h3>
<pre><code>IP 127.0.0.1.8888 &gt; 127.0.0.1.63515: Flags [F.], seq 550, ack 1060, win 6363, options [nop,nop,TS val 1572533681 ecr 1572533671], length 0
	0x0000:  4500 0034 0000 4000 4006 0000 7f00 0001  E..4..@.@.......
	0x0010:  7f00 0001 22b8 f81b 706a 730d 13d5 6f5a  ....&quot;...pjs...oZ
	0x0020:  8011 18db fe28 0000 0101 080a 5dba f5b1  .....(......]...
	0x0030:  5dba f5a7                                ]...
IP 127.0.0.1.63515 &gt; 127.0.0.1.8888: Flags [.], ack 551, win 6371, options [nop,nop,TS val 1572533681 ecr 1572533681], length 0
	0x0000:  4500 0034 0000 4000 4006 0000 7f00 0001  E..4..@.@.......
	0x0010:  7f00 0001 f81b 22b8 13d5 6f5a 706a 730e  ......&quot;...oZpjs.
	0x0020:  8010 18e3 fe28 0000 0101 080a 5dba f5b1  .....(......]...
	0x0030:  5dba f5b1                                ]...
IP 127.0.0.1.63515 &gt; 127.0.0.1.8888: Flags [.], ack 551, win 6371, length 0
	0x0000:  4500 0028 6b78 0000 4006 0000 7f00 0001  E..(kx..@.......
	0x0010:  7f00 0001 f81b 22b8 13d5 6f59 706a 730e  ......&quot;...oYpjs.
	0x0020:  5010 18e3 fe1c 0000                      P.......
IP 127.0.0.1.8888 &gt; 127.0.0.1.63515: Flags [.], ack 1060, win 6363, options [nop,nop,TS val 1572578966 ecr 1572533681], length 0
	0x0000:  4500 0034 0000 4000 4006 0000 7f00 0001  E..4..@.@.......
	0x0010:  7f00 0001 22b8 f81b 706a 730e 13d5 6f5a  ....&quot;...pjs...oZ
	0x0020:  8010 18db fe28 0000 0101 080a 5dbb a696  .....(......]...
	0x0030:  5dba f5b1                                ]...
IP 127.0.0.1.63515 &gt; 127.0.0.1.8888: Flags [F.], seq 1060, ack 551, win 6371, options [nop,nop,TS val 1572607233 ecr 1572578966], length 0
	0x0000:  4500 0034 0000 4000 4006 0000 7f00 0001  E..4..@.@.......
	0x0010:  7f00 0001 f81b 22b8 13d5 6f5a 706a 730e  ......&quot;...oZpjs.
	0x0020:  8011 18e3 fe28 0000 0101 080a 5dbc 1501  .....(......]...
	0x0030:  5dbb a696                                ]...
IP 127.0.0.1.8888 &gt; 127.0.0.1.63515: Flags [.], ack 1061, win 6363, options [nop,nop,TS val 1572607233 ecr 1572607233], length 0
	0x0000:  4500 0034 0000 4000 4006 0000 7f00 0001  E..4..@.@.......
	0x0010:  7f00 0001 22b8 f81b 706a 730e 13d5 6f5b  ....&quot;...pjs...o[
	0x0020:  8010 18db fe28 0000 0101 080a 5dbc 1501  .....(......]...
	0x0030:  5dbc 1501                                ]...
</code></pre>
<p>连接终止使用了四路握手过程（或称四次握手，four-way handshake），在这个过程中连接的每一侧都独立地被终止。当一个端点要停止它这一侧的连接，就向对侧发送FIN，对侧回复ACK表示确认。因此，拆掉一侧的连接过程需要一对FIN和ACK，分别由两侧端点发出。</p>
<p>首先发出FIN的一侧，如果给对侧的FIN响应了ACK，那么就会超时等待2*MSL时间，然后关闭连接。在这段超时等待时间内，本地的端口不能被新连接使用；避免延时的包的到达与随后的新连接相混淆。RFC793定义了MSL为2分钟，Linux设置成了30s。参数tcp_max_tw_buckets控制并发的TIME_WAIT的数量，默认值是180000，如果超限，那么，系统会把多的TIME_WAIT状态的连接给destory掉，然后在日志里打一个警告（如：time wait bucket table overflow）</p>
<p>连接可以工作在<a href="https://zh.wikipedia.org/w/index.php?title=TCP%E5%8D%8A%E5%BC%80&action=edit&redlink=1">TCP半开</a>状态。即一侧关闭了连接，不再发送数据；但另一侧没有关闭连接，仍可以发送数据。已关闭的一侧仍然应接收数据，直至对侧也关闭了连接。</p>
<p>也可以通过测三次握手关闭连接。主机A发出FIN，主机B回复FIN & ACK，然后主机A回复ACK.</p>
<blockquote>
<p><a href=https://zh.wikipedia.org/wiki/%E4%BC%A0%E8%BE%93%E6%8E%A7%E5%88%B6%E5%8D%8F%E8%AE%AE>https://zh.wikipedia.org/wiki/%E4%BC%A0%E8%BE%93%E6%8E%A7%E5%88%B6%E5%8D%8F%E8%AE%AE</a></p>
</blockquote>
<blockquote>
<p>tcp抓包工具：tcpdump</p>
</blockquote>
</div>
<div class=article-footer>
<blockquote class=mt-2x>
<ul class="post-copyright list-unstyled">
<li class="post-copyright-link hidden-xs">
<strong>本文链接: </strong>
<a href=https://blog.yoogo.top/2021/01/tcp%E5%AD%A6%E4%B9%A0/ title=tcp学习 target=_blank rel=external>https://blog.yoogo.top/2021/01/tcp%E5%AD%A6%E4%B9%A0/</a>
</li>
<li class=post-copyright-license>
<strong>License: </strong>
<a href=http://creativecommons.org/licenses/by/4.0/deed.zh target=_blank rel=external>CC BY 4.0 CN</a>
</li>
</ul>
</blockquote>
<div class="panel panel-default panel-badger">
<div class=panel-body>
<figure class=media>
<div class=media-left>
<a href=https://github.com/yoogoc target=_blank class="img-burn thumb-sm visible-lg">
<img src=https://blog.yoogo.top/sites-images/Avatar200.png class="img-rounded w-full" alt>
</a>
</div>
<div class=media-body>
<h3 class=media-heading><a href=https://github.com/yoogoc target=_blank><span class=text-dark>yoogo</span><small class=ml-1x>多读书，少放炮</small></a></h3>
<div>我书读的不多，想的却不少</div>
</div>
</figure>
</div>
</div>
</div>
</article>
</div><nav class="bar bar-footer clearfix" data-stick-bottom>
<div class=bar-inner>
<ul class="pager pull-left">
<li class=prev>
<a href=https://blog.yoogo.top/2020/12/first-envoy/ title="first envoy(待完善)"><i class="icon icon-angle-left" aria-hidden=true></i><span>&nbsp;&nbsp;下一篇</span></a>
</li>
<li class=next>
<a href=https://blog.yoogo.top/2021/01/grpc-lb/ title="gRPC 负载均衡"><span>上一篇&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden=true></i></a>
</li>
<li class=toggle-toc>
<a class="toggle-btn collapsed" data-toggle=collapse href=#collapseToc aria-expanded=false title=文章目录 role=button>
<span>[&nbsp;</span><span>文章目录</span>
<i class="text-collapsed icon icon-anchor"></i>
<i class="text-in icon icon-close"></i>
<span>]</span>
</a>
</li>
</ul>
<div class=bar-right>
<div class=share-component data-sites=weibo,qq,wechat,facebook,twitter data-mobile-sites=weibo,qq,qzone></div>
</div>
</div>
</nav>
</main><footer class=footer itemscope itemtype=http://schema.org/WPFooter>
<ul class=social-links>
<li><a href=https://github.com/yoogoc target=_blank title=github data-toggle=tooltip data-placement=top>
<i class="icon icon-github"></i></a></li>
<li><a href=https://blog.yoogo.top/index.xml target=_blank title=rss data-toggle=tooltip data-placement=top>
<i class="icon icon-rss"></i></a></li>
</ul>
<div class=copyright>
&copy;2018 -
2022
<div class=publishby>
Theme by <a href=https://github.com/xiaoheiAh target=_blank> xiaoheiAh </a>base on<a href=https://github.com/xiaoheiAh/hugo-theme-pure target=_blank> pure</a>.
</div>
</div>
</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_SVG"></script>
<script type=text/x-mathjax-config>
    MathJax.Hub.Config({
            showMathMenu: false, //disables context menu
            tex2jax: {
            inlineMath: [ ['$','$'], ['\\(','\\)'] ]
           }
    });
</script>
<script src=https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js></script>
<script>window.jQuery||document.write('<script src="js/jquery.min.js"><\/script>')</script>
<script type=text/javascript src=https://cdn.staticfile.org/highlight.js/9.15.10/highlight.min.js></script>
<script type=text/javascript src=https://cdn.staticfile.org/highlight.js/9.15.10/languages/python.min.js defer></script>
<script type=text/javascript src=https://cdn.staticfile.org/highlight.js/9.15.10/languages/javascript.min.js defer></script><script>hljs.configure({tabReplace:'    ',classPrefix:''}),hljs.initHighlightingOnLoad()</script>
<script src=https://blog.yoogo.top/js/application.min.a94ab19cb63a95c8d7fbd7b85cab3ddeea8c369bdf75b9cab6708787ead123af.js></script>
<script src=https://blog.yoogo.top/js/plugin.min.19c5bcb2fb0789ab4f2b7834e5ceb5e92635645605bab902c1024b25f1502364.js></script>
<script>(function(a){var b={TRANSLATION:{POSTS:'文章',PAGES:'页面',CATEGORIES:'分类',TAGS:'标签',UNTITLED:'(未命名)'},ROOT_URL:'https://blog.yoogo.top/',CONTENT_URL:'https://blog.yoogo.top//searchindex.json '};a.INSIGHT_CONFIG=b})(window)</script>
<script type=text/javascript src=https://blog.yoogo.top/js/insight.min.4a2d52de4bfff73e0c688404fe3d17c9a3ae12d9888e1e1ac9c690e4890de2ded50fe55f2b819c2ba55435a76f396f3ea6805765f0b0af5635cdf74ea459eab0.js defer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js></script>
<script>tocbot.init({tocSelector:'.js-toc',contentSelector:'.js-toc-content',headingSelector:'h1, h2, h3',hasInnerContainers:!0})</script>
<script type=text/javascript src=https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js></script>
<script type=text/javascript src=/js/opt-mermaid.js></script>
<script id=LA_COLLECT src=//sdk.51.la/js-sdk-pro.min.js></script>
<script>LA.init({id:"JVnj1Z6jp0t62WHS",ck:"JVnj1Z6jp0t62WHS"})</script>
</body>
</html>